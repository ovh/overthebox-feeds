#!/bin/sh
# vim: set noexpandtab tabstop=4 shiftwidth=4 softtabstop=4 :

# set -e

. /etc/os-release

opkg update -V1
opkg upgrade -V1 "$ID"

for file in /etc/uci-defaults/otb*.defaults; do
	[ -f "$file" ] || continue
	( . "$file" ) && rm -f "$file"
done

for file in /etc/sysctl.d/*.conf; do
	[ -f "$file" ] || continue
	sysctl -p "$file"
done

# not here..
[ -d /var/run/config.check ] || reload_config

rm -fr /tmp/luci-indexcache /tmp/luci-modulecache
