#!/bin/sh
# vim: set noexpandtab tabstop=4 shiftwidth=4 softtabstop=4 :

. /lib/functions.sh

_show_status() {
	connectivity=$(ubus call network.interface."$1" status | jq -r '.data.connectivity')
	case "$connectivity" in
		"OK")    echo "  $1 tracked up";;
		"ERROR") echo "  $1 tracked down";;
		*)       echo "  $1 not tracked";;
	esac
}

echo "OTB-TRACKER interfaces status :"
config_load network
config_foreach _show_status interface
